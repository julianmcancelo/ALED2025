<div class="container-fluid mt-4">
  <header class="mb-4">
    <h1 class="h3">Personalización del Sitio</h1>
    <p class="text-muted">Realiza cambios globales que afectarán a todo el sitio.</p>
  </header>

  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Configuración General</h5>

      <!-- Formulario para cambiar el título -->
      <div class="mb-3">
        <label for="siteTitle" class="form-label">Título del Sitio</label>
        <input
          type="text"
          class="form-control"
          id="siteTitle"
          placeholder="Ej: Mi Tienda Fantástica"
          [(ngModel)]="tituloActual"
        />
        <div class="form-text">Este es el título que aparece en la cabecera principal.</div>
      </div>

      <!-- Formulario para cambiar el subtítulo -->
      <div class="mb-3">
        <label for="siteSubtitle" class="form-label">Subtítulo del Sitio</label>
        <textarea
          class="form-control"
          id="siteSubtitle"
          rows="3"
          placeholder="Ej: Tu tienda de confianza para productos increíbles."
          [(ngModel)]="subtituloActual"
        ></textarea>
        <div class="form-text">Este es el subtítulo que aparece en la página de inicio.</div>
      </div>

      <!-- Botón de Guardar con estados dinámicos -->
      <button
        class="btn btn-primary"
        (click)="guardarCambios()"
        [disabled]="estadoGuardado() === 'guardando'"
      >
        <!--
          Usamos @switch para mostrar diferente contenido en el botón
          según el estado de la operación de guardado.
        -->
        @switch (estadoGuardado()) { @case ('guardando') {
        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
        <span class="ms-1">Guardando...</span>
        } @case ('guardado') {
        <i class="bi bi-check-circle-fill me-1"></i>
        <span>¡Guardado!</span>
        } @case ('error') {
        <i class="bi bi-exclamation-triangle-fill me-1"></i>
        <span>Error al Guardar</span>
        } @default {
        <i class="bi bi-check-circle me-1"></i>
        <span>Guardar Cambios</span>
        } }
      </button>
    </div>
  </div>

  <!-- Sección de Tarjetas Virtuales -->
  <div class="card mt-4">
    <div class="card-header bg-gradient-to-r from-blue-500 to-purple-600 text-white">
      <h5 class="card-title mb-0">
        <i class="bi bi-credit-card-fill me-2"></i>
        Personalización de Tarjetas Virtuales
      </h5>
    </div>
    <div class="card-body">
      <p class="text-muted mb-3">
        Configura la apariencia de las tarjetas virtuales del sistema (logo, tipo, banco, colores).
      </p>
      
      <div class="d-flex align-items-center justify-content-between">
        <div>
          <h6 class="mb-1">Configurar Tarjetas Virtuales</h6>
          <small class="text-muted">
            Personaliza el logo, tipo de tarjeta, nombre del banco y colores para las nuevas tarjetas virtuales.
          </small>
        </div>
        <button type="button" class="btn btn-outline-primary" (click)="navegarAPersonalizacionTarjetas()">
          <i class="bi bi-gear me-1"></i>
          Configurar
        </button>
      </div>
      
      <div class="alert alert-info mt-3">
        <i class="bi bi-info-circle me-2"></i>
        <strong>Nota:</strong> Los cambios solo afectarán a las tarjetas virtuales creadas después de guardar la configuración.
      </div>
    </div>
  </div>
</div>
